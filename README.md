# GoonDash
- A C program with Lua scripting, that utilizes Tiled and Aseprite for the game "engine".
- ![Build All Platforms]( https://github.com/kjblanchard/goonDash/actions/workflows/build.yml/badge.svg)
![Status Picture](https://github.com/kjblanchard/goonDash/blob/master/img/status.png?raw=true)
- Play the game here, or likely watch its "progress" [Supergoon.com](https://supergoondash.supergoon.com)

## Development
- Mostly developed on macos apple silicon
- Builds on Mac, Linux, Windows, Emscripten throughout development with github actions
- Releases on tags with github actions

## Goals
- Better at C
- Better at cross-platform building with cmake (Macos, Linux, Windows)
- Learn github actions to build and publish outside developer environment
- Create a simple "Geometry Dash" clone.

#### Stretch Goals
- Game build on Mobile (IOS priority)

## Building
- If you have the libraries installed, just use the make rebuild command.  Libraries required are in the libraries section
- Otherwise, use the full builds in the makefile for your platform as that clones all the dependencies and builds them locally, this just takes a bit longer.

## Current State
- Loads a tilemap from tiled
- Sound implemented, loops over and over.
- Basic 2d AABB Physics implemented
- TTF loads on all platforms
- Builds on all platforms in runners.

## Requirements
- Cmake will install all of the required libraries with all of the rebuild commands in make except "rebuild".

## Components
- SDL2: Low Level handling of windowing, events, input
- OpenAL: Cross-Platform sound abstraction
- Emscripten: Build for web
- Lua: Embedded Scripting
- Make: Streamlining building with one command
- CMake: The actual cross-platform build system.
- cppclean: Tests
- Terraform: s3 website for emscripten

## Documentation
- Hosted on docs.supergoon.com, generated by doxygen.  Not created yet.

## Licenses
### Full Game
- MIT

### Libraries
- [SDL](https://www.libsdl.org/license.php) - ZLIB - Low level Windowing / Eventing
- [SDL_Image](https://www.libsdl.org/license.php) - ZLIB - Loads Different picture types into SDL_Textures
- [SDL_Ttf](https://www.libsdl.org/license.php) - ZLIB - Loads True type fonts multi-platform with Freetype and Harfbuzz
- [doxygen](https://doxygen.nl) - GPL | Automatic documentation
- [Lua](https://www.lua.org/license.html) - MIT - Scripting
- [Supergoon Sound](https://github.com/icculus/mojoAL/blob/main/LICENSE.txt) - ZLIB | OpenAL implementation - Mojoal wrapper
- [Supergoon Physics](https://github.com/kjblanchard/goonPhysics) - MIT | Simple AABB physics simulation

### ZeroBrane Debugging notes
- Had to build luasocket from source, as the one from luarocks didn't build right for arm
- Had to get the build command from the mac.cmd file, and use that
- Had to remove -bundle and use these changes:
-LDFLAGS_macosx= -bundle -undefined dynamic_lookup -o
-LDFLAGS_macosx=  -undefined dynamic_lookup -dynamiclib -o
- Had to rename the files and put in a shared lib local location, as for some reason it references core in different places (socket-3.0.0)
- Now when you run (with make run) it will trigger breakpoints set in zerobrane after you start the server.

### Valgrind
valgrind --track-origins=yes --leak-check=yes --leak-resolution=low --show-leak-kinds=definite ./SupergoonDash 2>&1 | tee memcheck.txt